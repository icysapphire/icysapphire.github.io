<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
window.color_set=[
  [255, 0, 0],
  [0,255,0],
  [0,0,255]
];
function pausecomp(millis)
{
    var date = new Date();
    var curDate = null;
    do { curDate = new Date(); }
    while(curDate-date < millis);
}
function newColor(old){
  newc = Math.floor(Math.random()*3);
  if (newc==old) return newColor(old);
  else return newc;
}
function generateCode(){
code = new Array();
for(i=0; i<5; i++){
  code[i]=newColor(code[i-1]);
}
alert("Generated code "+code.join());
return code;
}
function broadcastCode(code){
for(i=0; i<5; i++){
  console.log('rgb('+color_set[code[i]][0]+','+color_set[code[i]][1]+','+color_set[code[i]][2]+')');
  $('body').css('background-color','rgb('+color_set[code[i]][0]+','+color_set[code[i]][1]+','+color_set[code[i]][2]+')');
  pausecomp(500);
}
  }</script>
</head>
<body>
<input type="button" value="Generate Code" onclick="$(this).hide();broadcastCode(generateCode());">
</body>
